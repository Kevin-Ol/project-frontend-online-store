(this["webpackJsonpsd-0x-project-frontend-online-store"]=this["webpackJsonpsd-0x-project-frontend-online-store"]||[]).push([[0],{24:function(e,t,a){e.exports=a(39)},29:function(e,t,a){},39:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(22),o=a.n(c),i=a(1),l=a(2),s=a(4),u=a(3),m=a(11),d=a(5),p=(a(29),a(16)),h=a(6),b=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=e.placeholder,a=e.name,n=e.onChange,c=e.value,o=e.type;return r.a.createElement("label",{htmlFor:a},r.a.createElement("input",{name:a,"data-testid":"checkout-".concat(a),placeholder:t,type:o,value:c,id:a,onChange:n}))}}]),a}(n.Component),g=[{placeholder:"Nome completo",name:"fullname",type:"text"},{placeholder:"Email",name:"email",type:"text"},{placeholder:"CPF",name:"cpf",type:"text"},{placeholder:"Telefone",name:"phone",type:"text"},{placeholder:"CEP",name:"cep",type:"text"},{placeholder:"Endere\xe7o",name:"address",type:"text"}],f=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(p.a)({},n,r))},e.state={fullname:"",email:"",cpf:"",phone:"",cep:"",address:"",sucess:!1},e.handleChange=e.handleChange.bind(Object(h.a)(e)),e.finishBuy=e.finishBuy.bind(Object(h.a)(e)),e}return Object(l.a)(a,[{key:"finishBuy",value:function(){this.setState({sucess:!0})}},{key:"render",value:function(){var e=this,t=this.state;return t.sucess?r.a.createElement("p",{className:"finish"},"Obrigado por comprar conosco ",t.fullname,"!"):r.a.createElement("main",null,r.a.createElement("form",{className:"checkout"},g.map((function(a){return r.a.createElement(b,{key:a.name,placeholder:a.placeholder,name:a.name,onChange:e.handleChange,value:t[a.name],type:a.type})}))),r.a.createElement("button",{type:"button",className:"finish-btn",onClick:this.finishBuy},"Finalizar"))}}]),a}(n.Component),v=a(8),y={name:"",rating:0,comment:""},E=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(p.a)({},n,r))},e.onSubmitForm=function(){(0,e.props.onClick)(e.state),e.setState({name:"",rating:0,comment:""})},e.state=y,e}return Object(l.a)(a,[{key:"render",value:function(){var e=this.state,t=e.name,a=e.rating,n=e.comment;return r.a.createElement("form",{className:"form-details"},r.a.createElement("label",{htmlFor:"name-label"},"Nome:"),r.a.createElement("input",{type:"text",name:"name",value:t,onChange:this.handleChange,id:"name-label",required:!0}),r.a.createElement("label",{htmlFor:"avaliator-label"},"Avalia\xe7\xe3o:"),r.a.createElement("input",{type:"number",name:"rating",value:a,min:"1",max:"5",onChange:this.handleChange,id:"avaliator-label",required:!0}),r.a.createElement("label",{htmlFor:"comment-label"},"Coment\xe1rio:"),r.a.createElement("textarea",{cols:"30",rows:"10",type:"text",name:"comment",value:n,onChange:this.handleChange,id:"comment-label","data-testid":"product-detail-evaluation"}),r.a.createElement("button",{type:"button",className:"submitBtn",onClick:this.onSubmitForm}," Avalie"))}}]),a}(n.Component),O=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("img",{className:"shopping-cart-icon",src:"https://image.flaticon.com/icons/png/512/5008/5008618.png",alt:"imagem de carrinho de compras"})}}]),a}(n.Component),j=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){var e=this.props,t=e.name,a=e.rating,n=e.comment;return r.a.createElement("section",{className:"evaluation"},r.a.createElement("p",null,"Nome: ",t),r.a.createElement("p",null,"Nota: ",a),r.a.createElement("p",null,"Comet\xe1rio: ",n))}}]),a}(n.Component),C=function(e){var t=JSON.parse(localStorage.getItem("carrinho")),a=[];t.some((function(t){return e.id===t.id}))?(t.map((function(t){return t.id===e.id&&t.quantity<t.available_quantity?(t.quantity+=1,t):t})),a=Object(v.a)(t)):(e.quantity=1,a=[].concat(Object(v.a)(t),[e])),localStorage.setItem("carrinho",JSON.stringify(a))},k=function(){var e=JSON.parse(localStorage.getItem("carrinho"));return e?e.reduce((function(e,t){return e+=t.quantity}),0):0},S=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).state={total:k(),evaluations:[]},e.addItemToCart=e.addItemToCart.bind(Object(h.a)(e)),e.addAvaliation=e.addAvaliation.bind(Object(h.a)(e)),e}return Object(l.a)(a,[{key:"addItemToCart",value:function(e){if(localStorage.getItem("carrinho"))C(e);else{e.quantity=1;var t=[e];localStorage.setItem("carrinho",JSON.stringify(t))}this.setState({total:k()})}},{key:"addAvaliation",value:function(e){this.setState((function(t){return{evaluations:[].concat(Object(v.a)(t.evaluations),[e])}}))}},{key:"render",value:function(){var e=this,t=this.props.location.state,a=t.title,n=t.price,c=t.thumbnail,o=t.shipping,i=this.state,l=i.total,s=i.evaluations;return r.a.createElement("section",null,r.a.createElement("div",{className:"cart-icon"},r.a.createElement(m.b,{to:"/shopping-cart","data-testid":"shopping-cart-button"},r.a.createElement(O,null)),r.a.createElement("span",{"data-testid":"shopping-cart-size"},l)),r.a.createElement("div",{className:"product-details"},r.a.createElement("h3",{"data-testid":"product-detail-name"},a),r.a.createElement("img",{alt:"imagem do produto",src:c}),r.a.createElement("div",null,r.a.createElement("span",null,"Pre\xe7o: R$ ".concat(n.toFixed(2))),o.free_shipping&&r.a.createElement("span",{className:"free-shipping","data-testid":"free-shipping"},"Frete gr\xe1tis")),r.a.createElement("button",{type:"button",className:"add-btn","data-testid":"product-detail-add-to-cart",onClick:function(){return e.addItemToCart(t)}},"Adicionar ao Carrinho")),r.a.createElement(E,{onClick:this.addAvaliation}),s.map((function(e,t){var a=e.name,n=e.rating,c=e.comment;return r.a.createElement(j,{key:t,name:a,rating:n,comment:c})})))}}]),a}(n.Component),N=a(15),I=a.n(N),x=a(20),F="https://api.mercadolibre.com/sites/MLB/categories",q="https://api.mercadolibre.com/sites/MLB/search?q=$",T="https://api.mercadolibre.com/sites/MLB/search?category=";function J(){return(J=Object(x.a)(I.a.mark((function e(){var t,a;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(F,{mode:"no-cors"});case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e,t){return L.apply(this,arguments)}function L(){return(L=Object(x.a)(I.a.mark((function e(t,a){var n,r;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t||!a){e.next=6;break}return e.next=3,fetch("".concat(q).concat(a));case 3:n=e.sent,e.next=15;break;case 6:if(!t||a){e.next=12;break}return e.next=9,fetch("".concat(T).concat(t));case 9:n=e.sent,e.next=15;break;case 12:return e.next=14,fetch("".concat(T).concat(t,"&q=").concat(a));case 14:n=e.sent;case 15:return e.next=17,n.json();case 17:return r=e.sent,e.abrupt("return",r);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var P=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={categories:[],loading:!0},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;(function(){return J.apply(this,arguments)})().then((function(t){e.setState({categories:Object(v.a)(t),loading:!1})}))}},{key:"render",value:function(){var e=this.state,t=e.categories,a=e.loading,n=this.props.onClick;return a?r.a.createElement("aside",null,r.a.createElement("span",null,"Carregando")):r.a.createElement("aside",null,r.a.createElement("button",{className:"dropdown_button"},"Categorias"),r.a.createElement("ol",{className:"categories"},t.map((function(e){return r.a.createElement("li",{key:e.id},r.a.createElement("label",{htmlFor:e.name,"data-testid":"category"},r.a.createElement("input",{type:"radio",id:e.name,name:"category",value:e.id,onClick:n}),e.name))}))))}}]),a}(n.Component),B=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).addItemToCart=n.addItemToCart.bind(Object(h.a)(n)),n}return Object(l.a)(a,[{key:"addItemToCart",value:function(e){if(localStorage.getItem("carrinho"))C(e);else{e.quantity=1;var t=[e];localStorage.setItem("carrinho",JSON.stringify(t))}(0,this.props.updateTotal)(k())}},{key:"render",value:function(){var e=this,t=this.props,a=t.product,n=t.product,c=n.id,o=n.title,i=n.thumbnail,l=n.price,s=n.shipping;return r.a.createElement("div",{className:"product-card","data-testid":"product"},r.a.createElement(m.b,{"data-testid":"product-detail-link",to:{pathname:"/details/".concat(c),state:a}},r.a.createElement("h4",null,o),r.a.createElement("img",{src:i,alt:"Product Thumbnail"}),r.a.createElement("div",null,r.a.createElement("span",null,"Pre\xe7o: R$ ".concat(l.toFixed(2))),s.free_shipping&&r.a.createElement("span",{className:"free-shipping","data-testid":"free-shipping"},"Frete gr\xe1tis"))),r.a.createElement("button",{type:"button",className:"add-btn","data-testid":"product-add-to-cart",onClick:function(){return e.addItemToCart(a)}},"Adicionar ao Carrinho"))}}]),a}(n.Component),A=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={query:"",category:"",prodList:[],render:!1,isEmpty:!0,total:k()},n.handleChangeCategory=n.handleChangeCategory.bind(Object(h.a)(n)),n.handleChangeInput=n.handleChangeInput.bind(Object(h.a)(n)),n.buttonLogic=n.buttonLogic.bind(Object(h.a)(n)),n.updateTotal=n.updateTotal.bind(Object(h.a)(n)),n}return Object(l.a)(a,[{key:"handleChangeCategory",value:function(e){var t=this,a=e.target.value;this.setState({category:a},(function(){var e=t.state.category;e&&w(e,!1).then((function(e){var a=e.results;t.setState({prodList:Object(v.a)(a)},(function(){return t.setState({render:!0,isEmpty:!1})}))}))}))}},{key:"handleChangeInput",value:function(e){var t=e.target.value;this.setState({query:t})}},{key:"buttonLogic",value:function(){var e=this,t=this.state,a=t.query,n=t.category;a&&w(n,a).then((function(t){var a=t.results;e.setState({prodList:Object(v.a)(a),isEmpty:!1,render:!0})}))}},{key:"updateTotal",value:function(e){this.setState({total:e})}},{key:"renderParag",value:function(){return r.a.createElement("p",{"data-testid":"home-initial-message",className:"inital-text"},"Digite algum termo de pesquisa ou escolha uma categoria.")}},{key:"renderList",value:function(){var e=this,t=this.state.prodList;return r.a.createElement("div",{className:"product-list"},t.map((function(t){return r.a.createElement(B,{className:"product-card",key:t.id,product:t,updateTotal:e.updateTotal})})))}},{key:"render",value:function(){var e=this.state,t=e.render,a=e.query,n=e.isEmpty,c=e.total;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"nav-bar"},r.a.createElement(P,{onClick:this.handleChangeCategory}),r.a.createElement("div",{className:"searchbar"},r.a.createElement("input",{"data-testid":"query-input",placeholder:"Procure um produto",type:"text",name:"query",onChange:this.handleChangeInput,value:a}),r.a.createElement("button",{"data-testid":"query-button",type:"button",onClick:this.buttonLogic},"Pesquisar")),r.a.createElement("div",{className:"cart-icon"},r.a.createElement(m.b,{"data-testid":"shopping-cart-button",to:"/shopping-cart"},r.a.createElement(O,null)),r.a.createElement("span",{"data-testid":"shopping-cart-size"},c))),r.a.createElement("main",{className:"main-page"},n&&this.renderParag(),t&&this.renderList()))}}]),a}(n.Component),z=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a),e=t.call(this);var n=JSON.parse(localStorage.getItem("carrinho")),r=[];return n&&(r=Object(v.a)(n)),e.state={items:r},e.removeItemFromCart=e.removeItemFromCart.bind(Object(h.a)(e)),e.addItemFromCart=e.addItemFromCart.bind(Object(h.a)(e)),e.deleteItemFromCart=e.deleteItemFromCart.bind(Object(h.a)(e)),e}return Object(l.a)(a,[{key:"removeItemFromCart",value:function(e){!function(e){var t=JSON.parse(localStorage.getItem("carrinho"));t.map((function(t){return t.id===e.id&&t.quantity>0?(t.quantity-=1,t):t})),localStorage.setItem("carrinho",JSON.stringify(t))}(e);var t=JSON.parse(localStorage.getItem("carrinho"));this.setState({items:Object(v.a)(t)})}},{key:"addItemFromCart",value:function(e){C(e);var t=JSON.parse(localStorage.getItem("carrinho"));this.setState({items:Object(v.a)(t)})}},{key:"deleteItemFromCart",value:function(e){!function(e){var t=JSON.parse(localStorage.getItem("carrinho")).filter((function(t){return t.id!==e.id}));localStorage.setItem("carrinho",JSON.stringify(t))}(e);var t=JSON.parse(localStorage.getItem("carrinho"));this.setState({items:Object(v.a)(t)})}},{key:"getTotal",value:function(){return JSON.parse(localStorage.getItem("carrinho")).reduce((function(e,t){return e+=t.quantity*t.price}),0)}},{key:"render",value:function(){var e=this,t=this.state.items,a=this.getTotal();return 0===a?r.a.createElement("p",{className:"empyt-cart","data-testid":"shopping-cart-empty-message"},"Seu carrinho est\xe1 vazio!"):r.a.createElement("main",{className:"cart-items"},r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Item"),r.a.createElement("th",null,"Pre\xe7o"),r.a.createElement("th",null,"Diminuir"),r.a.createElement("th",null,"Total"),r.a.createElement("th",null,"Aumentar"),r.a.createElement("th",null,"Remover"))),r.a.createElement("tbody",null,t.map((function(t){return r.a.createElement("tr",{key:t.id},r.a.createElement("td",{"data-testid":"shopping-cart-product-name "},t.title),r.a.createElement("td",{"data-testid":"shopping-cart-product-name "},"R$: ",t.price),r.a.createElement("td",null,r.a.createElement("button",{type:"button","data-testid":"product-decrease-quantity",onClick:function(){return e.removeItemFromCart(t)}},"-")),r.a.createElement("td",{"data-testid":"shopping-cart-product-quantity"},t.quantity),r.a.createElement("td",null,r.a.createElement("button",{type:"button","data-testid":"product-increase-quantity",onClick:function(){return e.addItemFromCart(t)}},"+")),r.a.createElement("td",null,r.a.createElement("button",{type:"button",onClick:function(){return e.deleteItemFromCart(t)}},"X")))})))),r.a.createElement("p",{"data-testid":"shopping-cart-size"},"Total: ",a.toFixed(2)),r.a.createElement(m.b,{to:"/checkout","data-testid":"checkout-products"},"Finalizar compra"))}}]),a}(n.Component),M=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("main",null,r.a.createElement("p",null,"P\xe1gina n\xe3o encontrada"))}}]),a}(n.Component),$=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("header",null,r.a.createElement("h1",null,r.a.createElement(m.b,{to:"/"},"Frontend Online Store")))}}]),a}(n.Component),R=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement(m.a,{basename:"project-frontend-online-store"},r.a.createElement($,null),r.a.createElement(d.c,null,r.a.createElement(d.a,{exact:!0,path:"/shopping-cart",component:z}),r.a.createElement(d.a,{exact:!0,path:"/checkout",component:f}),r.a.createElement(d.a,{exact:!0,path:"/details/:id",component:S}),r.a.createElement(d.a,{exact:!0,path:"/",component:A}),r.a.createElement(d.a,{path:"*",component:M})))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(R,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[24,1,2]]]);
//# sourceMappingURL=main.6dfcd4a1.chunk.js.map